{% extends "base.html" %}
{% block content %}
<h2>Compress PDF (rasterize pages and re-embed)</h2>
<p>Note: this approach rasterizes pages, which reduces vector fidelity but often dramatically reduces size for image-heavy PDFs.</p>
<input id="compressFile" type="file" accept="application/pdf" />
<label>Quality (0.1 - 1.0): <input id="quality" type="range" min="0.1" max="1.0" step="0.1" value="0.7" /></label>
<button id="compressBtn">Compress</button>
<div id="compressStatus" style="margin-top:12px;color:#333;"></div>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="https://unpkg.com/pdfjs-dist/build/pdf.min.js"></script>
<script>
// point pdf.js to worker (CDN)
if (window.pdfjsLib) {
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist/build/pdf.worker.min.js';
}
</script>
<script src="{{ url_for('static', filename='js/compress.js') }}"></script>
{% endblock %}
